$(document).ready(function(){$("[data-accordeon]").on("click",function(e){e.preventDefault(),$(this).parent(".dropdown").closest(".hasChildren").slideToggle(slow),console.log("click")})}),window.replaceUrlParam=function(e,t,a){var n=new RegExp("\\b("+t+"=).*?(&|$)");return e.search(n)>=0?e.replace(n,"$1"+a+"$2"):e+(e.indexOf("?")>0?"&":"?")+t+"="+a},window.downloadPdf=function(){$("#pageContent").on("click",".download-pdf",function(e){e.preventDefault();var t=$(this).parents(".form-group").find("[data-selected-value]").attr("data-selected-value");$(this).parents(".form-group").find("a").each(function(){var e=$(this).attr("data-option-value");e==t&&$("#pdfDownloadFrame").attr("src",t)})})},window.markSelected=function(e,t){if(!e)return null;if(e.Selected=e.Id==t,e.Selected)return e.Selected=!0,e;if(!e.Nodes||!e.Nodes.length)return null;for(var a=0;a<e.Nodes.length;a++){var n=e.Nodes[a],r=markSelected(n,t);if(r)return e.Expanded=!0,r}return null},window.addToFavorites=function(e){var t=e.attr("data-add-favorites");$.ajax({url:t,type:"POST"}).done(function(t){alert("sent"),e.find(".fa-heart").removeClass("fa-heart-o"),e.attr("data-favorite","true")})},window.removeFromFavorites=function(e){var t=e.attr("data-remove-favorites");$.ajax({url:t,type:"POST"}).done(function(t){alert("sent"),e.find(".fa-heart").addClass("fa-heart-o"),e.attr("data-favorite","false")})},window.getQueryVariable=function(e){for(var t=window.location.search.substring(1),a=t.split("&"),n=0;n<a.length;n++){var r=a[n].split("=");if(r[0]==e)return r[1]}return!1},window.replaceUrlParam=function(e,t,a){var n=new RegExp("\\b("+t+"=).*?(&|$)");return e.search(n)>=0?e.replace(n,"$1"+a+"$2"):e+(e.indexOf("?")>0?"&":"?")+t+"="+a};var Navigation=React.createClass({displayName:"Navigation",getInitialState:function(){return{data:[],selected:""}},componentWillMount:function(){var e=this,t="/Files/WebServices/Navigation.ashx?catalog="+e.props.source;e.serverRequest=$.getJSON(t,function(t){var a=t[0].Nodes;e.setState({data:a})}.bind(this))},componentWillUnmount:function(){var e=this;e.serverRequest.abort()},componentDidMount:function(){setTimeout(function(){},100)},openChild:function(e){e.preventDefault();var t=e.target;"true"==$(t).parent().attr("data-expanded")?($(t).parent().attr("data-expanded","false"),$(t).parent().children(".hasChildren").hide(),$(t).removeClass("opened")):($(t).parent().attr("data-expanded","true"),$(t).parent().children(".hasChildren").show(),$(t).addClass("opened"))},eachItem:function(e,t){return 0!=e.Nodes.length?React.createElement("li",{key:t,index:t,"data-expanded":e.Expanded},React.createElement("a",{href:e.Id,className:e.Selected,onClick:this.openChild},e.Name),React.createElement("ul",{className:"hasChildren","data-expanded":e.Expanded},React.createElement(NavigationTree,{data:e.Nodes}))):React.createElement("li",{key:t,index:t,className:t===this.props.active-1?"dropdown active":"dropdown","data-expanded":e.Expanded},React.createElement("a",{href:e.Id,className:e.Selected},e.Name),React.createElement("a",{href:"","data-bookmark":e.Bookmarked,onClick:this.registerBookmark},React.createElement("i",{className:"fa fa-bookmark-o"})))},render:function(){return React.createElement("ul",{className:"componentWrapper"},this.state.data.map(this.eachItem))}}),NavigationTree=React.createClass({displayName:"NavigationTree",getInitialState:function(){return{data:[],bookmark:""}},componentDidMount:function(){this.setState({data:this.props.data})},openChild:function(e){e.preventDefault();var t=e.target;"true"==$(t).parent().attr("data-expanded")?($(t).parent().attr("data-expanded","false"),$(t).parent().children(".hasChildren").hide(),$(t).removeClass("opened")):($(t).addClass("opened"),$(t).parent().attr("data-expanded","true"),$(t).parent().children(".hasChildren").show())},update:function(e){e.preventDefault();$(e.currentTarget);console.dir($(e.currentTarget)[0].attributes.href.value);var t=(this.refs.link,$(e.currentTarget)[0].attributes.href.value),a=encodeURIComponent(t),n="/Default.aspx?ID=126&groupId="+a;$(".navigation").find("a").removeClass("selected"),$(".navigation").find("li").removeAttr("data-expanded"),$(e.currentTarget).parents("li").attr("data-expanded","true"),$(e.currentTarget).addClass("selected"),$.ajax({url:n,type:"get"}).done(function(e){$("#pageContent").html(e),$("#pageContent").on("click",".download-pdf",function(e){e.preventDefault();var t=$(this).parents(".form-group").find("[data-selected-value]").attr("data-selected-value");$(this).parents(".form-group").find("a").each(function(){var e=$(this).attr("data-option-value");e==t&&$("#pdfDownloadFrame").attr("src",t)})}),$("#pageContent").on("change","[data-page-size]",function(){var e=$(this).val(),t=$(this).attr("data-url"),a=replaceUrlParam(t,"PageSize",e);$.ajax({url:a,type:"get"}).done(function(e){$("#pageContent").html(e)})}),$("#pageContent").on("click","[data-select-downloadable] a",function(e){e.preventDefault();var t=$(this).attr("data-option-value"),a=$(this).attr("data-option-name");$(this).parents(".btn-group").find("[data-selected-value]").attr("data-selected-value",t),$(this).parents(".btn-group").find("[data-selected-name]").html(a)}),$("[data-tooltip]").tooltip(),$("#pageContent").on("click","[data-favorite]",function(e){e.preventDefault();var t=$(this).attr("data-favorite");"true"==t?removeFromFavorites($(this)):addToFavorites($(this))}),$(document).ajaxComplete(function(){$(".zoom-image").wrap('<span style="display:inline-block"></span>').css("display","block").parent().zoom()}),downloadPdf(),$("#pageContent").on("click",".product-list-link",function(e){e.preventDefault();var t=encodeURIComponent($(this).attr("data-group-id")),a=$(this).attr("href"),n="/Default.aspx?ID=126&groupId="+t+"&productId="+a;noty({text:"Loading content...",layout:"center",theme:"relax",animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},type:"information",timeout:!1});$.ajax({url:n,type:"get"}).done(function(e){$("#pageContent").html(e),$.noty.closeAll(),$("[data-select-downloadable] a").on("click",function(e){e.preventDefault();var t=$(this).attr("data-option-value"),a=$(this).attr("data-option-name");$(this).parents(".btn-group").find("[data-selected-value]").attr("data-selected-value",t),$(this).parents(".btn-group").find("[data-selected-name]").html(a)}),$("[data-tooltip]").tooltip(),$("[data-favorite]").on("click",function(e){e.preventDefault();var t=$(this).attr("data-favorite");"true"==t?removeFromFavorites($(this)):addToFavorites($(this))}),downloadPdf(),$(".product-list-link").on("click",function(e){e.preventDefault();var t=encodeURIComponent($(this).attr("data-group-id")),a=$(this).attr("href"),n="/Default.aspx?ID=126&groupId="+t+"&productId="+a;noty({text:"Loading content...",layout:"center",theme:"relax",animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},type:"information",timeout:!1});$.ajax({url:n,type:"get"}).done(function(e){$("#pageContent").html(e),$.noty.closeAll()})}),downloadPdf()})})})},registerBookmark:function(e){var t=$(e.target).parent("a"),a=t[0].attributes["data-bookmark"].value,n=t[0].attributes["data-group"].value,r=t[0].attributes.href.value,o=(t[0].attributes["data-index"].value,this);if("true"==a){var i="/Files/WebServices/Bookmarks.ashx?action=delete&group="+encodeURIComponent(r);$.ajax({method:"GET",url:i,contentType:"application/json",cache:!1}).done(function(e){for(var t=0;t<o.state.data.length;t++){var a=o.state.data[t],n=a.Id;if(r==n){a.Bookmarked=!1;break}}o.setState(o.state)}).fail(function(e){})}else $.ajax({method:"POST",url:"/Files/WebServices/Bookmarks.ashx",data:JSON.stringify({Group:r,Name:n}),contentType:"application/json"}).done(function(e){for(var t=0;t<o.state.data.length;t++){var a=o.state.data[t],n=a.Id;if(r==n){a.Bookmarked=!0;break}}o.setState(o.state)}).fail(function(e){})},eachItem:function(e,t){if(0!=e.Nodes.length){e.Nodes;return React.createElement("li",{key:t,index:t,className:t===this.props.active-1?"dropdown active":"dropdown","data-expanded":e.Expanded},React.createElement("a",{href:e.Id,className:e.Selected,onClick:this.openChild},e.Name),React.createElement("ul",{className:"hasChildren","data-expanded":e.Expanded},React.createElement(NavigationTree,{key:t,data:e.Nodes})))}return React.createElement("li",{key:t,index:t,className:"noIcon","data-expanded":e.Expanded},React.createElement("a",{href:e.Id,ref:"link",onClick:this.update,index:t,"data-overflow":!0,className:e.Selected,"data-toggle":"tooltip","data-placement":"right",title:e.Name},e.Name),React.createElement("a",{href:e.Id,"data-index":t,"data-group":e.Name,"data-bookmark":e.Bookmarked,onClick:this.registerBookmark,ref:"link"},React.createElement("i",{className:"fa fa-bookmark-o"})))},render:function(){return React.createElement("div",null,this.state.data.map(this.eachItem))}}),NavigationLink=React.createClass({displayName:"NavigationLink",render:function(){return React.createElement("li",{className:"noIcon","data-expanded":this.props.expanded},React.createElement("a",{href:this.props.href,"data-overflow":!0,className:this.props.className,"data-toggle":"tooltip","data-placement":"right",title:this.props.title},this.props.title),React.createElement("a",{href:item.Id,"data-index":i,"data-group":item.Name,"data-bookmark":item.Bookmarked,onClick:this.registerBookmark,ref:"link"},React.createElement("i",{className:"fa fa-bookmark-o"})))}}),MainContent=React.createClass({displayName:"MainContent",getInitialState:function(){return{data:"",url:""}},componentWillMount:function(){var e=this,t=this.props.source;e.setState({url:t}),$.ajax({url:t,type:"GET",dataType:"html"}).done(function(t){var a=t;e.setState({data:a})})},componentDidMount:function(){},renderLoadedContent:function(){return React.createElement("div",{id:"pageContent",dangerouslySetInnerHTML:{__html:this.state.data}})},renderEmptyContent:function(){return React.createElement("div",{id:"pageContent"},React.createElement("div",{className:"loading-image"}))},render:function(){return""==this.props.source?this.renderEmptyContent():this.renderLoadedContent()}}),RenderPage=React.createClass({displayName:"RenderPage",getInitialState:function(){return{catalog:"",groupId:"",productId:"",contentSource:""}},componentWillMount:function(){var e=getQueryVariable("catalog"),t=getQueryVariable("bookmark"),a=getQueryVariable("favorite");contentSource="",a?contentSource="/Default.aspx?ID=126&groupid="+t+"&productId="+a:t&&(contentSource="/Default.aspx?ID=126&groupid="+t),this.setState({catalog:e,groupID:t,productId:a,contentSource:contentSource})},componentDidMount:function(){},render:function(){return React.createElement("div",{className:"wrapper"},React.createElement("div",{className:"col-sm-3"},React.createElement("div",{id:"catalogNavContainer"},React.createElement("section",{className:"catalogNavSection topSection"},React.createElement("h1",null,this.state.catalog),React.createElement("a",{href:"/Default.aspx?ID=1",className:"btn btn-sm btn-warning pull-right"},"Select Catalog")),React.createElement("section",{className:"catalogNavSection searchSection"},React.createElement("form",{action:"/Default.aspx",id:"searchForm"},React.createElement("input",{type:"hidden",name:"ID",value:"127"}),React.createElement("input",{placeholder:"Serial #",id:"searchSubmit","data-error":"Search for something",type:"text",name:"q",value:this.props.children}),React.createElement("button",{className:"btn btn-sm btn-warning",type:"submit"},React.createElement("i",{className:"fa fa-search"})))),React.createElement("section",{className:"catalogNavSection navSection navigation"},React.createElement(Navigation,{source:this.state.catalog,onChange:this.update})))),React.createElement("div",{className:"col-sm-9"},React.createElement(MainContent,{source:this.state.contentSource})))}});null!==document.getElementById("react-renderPage")&&ReactDOM.render(React.createElement(RenderPage,null),document.getElementById("react-renderPage"));