$(document).ready(function(){$("[data-accordeon]").on("click",function(e){e.preventDefault(),$(this).parent(".dropdown").closest(".hasChildren").slideToggle(slow),console.log("click")}),$(".favorite-add-line").on("click",function(e){e.preventDefault();var t=$(this).attr("data-product-id"),a=$(this).parents(".favorite-quantity-wrapper").find('[name="quantity"]').val();console.log(t),console.log(a)})}),window.replaceUrlParam=function(e,t,a){var n=new RegExp("\\b("+t+"=).*?(&|$)");return e.search(n)>=0?e.replace(n,"$1"+a+"$2"):e+(e.indexOf("?")>0?"&":"?")+t+"="+a},window.downloadPdf=function(){$("#pageContent").on("click",".download-pdf",function(e){e.preventDefault();var t=$(this).parents(".form-group").find("[data-selected-value]").attr("data-selected-value");$(this).parents(".form-group").find("a").each(function(){var e=$(this).attr("data-option-value");e==t&&$("#pdfDownloadFrame").attr("src",t)})})},window.markSelected=function(e,t){if(!e)return null;if(e.Selected=e.Id==t,e.Selected)return e.Selected=!0,e;if(!e.Nodes||!e.Nodes.length)return null;for(var a=0;a<e.Nodes.length;a++){var n=e.Nodes[a],r=markSelected(n,t);if(r)return e.Expanded=!0,r}return null},window.addToFavorites=function(e){var t=e.attr("data-add-favorites");$.ajax({url:t,type:"POST"}).done(function(t){alert("sent"),e.find(".fa-heart").removeClass("fa-heart-o"),e.attr("data-favorite","true")})},window.removeFromFavorites=function(e){var t=e.attr("data-remove-favorites");$.ajax({url:t,type:"POST"}).done(function(t){alert("sent"),e.find(".fa-heart").addClass("fa-heart-o"),e.attr("data-favorite","false")})},window.getQueryVariable=function(e){for(var t=window.location.search.substring(1),a=t.split("&"),n=0;n<a.length;n++){var r=a[n].split("=");if(r[0]==e)return r[1]}return!1},window.replaceUrlParam=function(e,t,a){var n=new RegExp("\\b("+t+"=).*?(&|$)");return e.search(n)>=0?e.replace(n,"$1"+a+"$2"):e+(e.indexOf("?")>0?"&":"?")+t+"="+a},window.updateContent=function(e){};var loadedContent="",h={loadedMainContent:function(e){return loadedContent=e},getCompatibleList:function(){console.log("getCompatibleList");var e=$("[data-productId]").attr("data-productId"),t="/Default.aspx?ID=132&productid="+e+"#body";console.log("compatibleList:"+t),$.ajax({url:t,type:"GET",dataType:"html"}).done(function(e){$("#compatibleList").html(e)})},registerPageEvents:function(){console.log("registered"),$("#pageContent").find(".thumbs-slider").slick({infinite:!0,slidesToShow:3,slidesToScroll:1,swipe:!1,touchMove:!1,arrows:!0,nextArrow:"<i class='fa fa-chevron-right' aria-hidden='true'></i>",prevArrow:"<i class='fa fa-chevron-left' aria-hidden='true'></i>"}),$("#pageContent").on("click",".thumbs-slider img",function(){var e=$(this).attr("data-big-src");$("#pageContent .zoom-image").attr("src",e),$("#pageContent .zoomImg").attr("src",e)}),$("#pageContent").find(".zoom-image").wrap('<span style="display:inline-block"></span>').css("display","block").parent().zoom(),$("#pageContent").on("click",".download-pdf",function(e){e.preventDefault();var t=$(this).parents(".form-group").find("[data-selected-value]").attr("data-selected-value");$(this).parents(".form-group").find("a").each(function(){var e=$(this).attr("data-option-value");e==t&&$("#pdfDownloadFrame").attr("src",t)})}),$("#pageContent").on("click",".view-pdf",function(e){e.preventDefault();var t=$(this).parents(".form-group").find("[data-selected-link]").attr("data-selected-link");$(this).parents(".form-group").find("a").each(function(){var e=$(this).attr("href");e==t&&window.open(t,"_blank")})}),$("#pageContent").on("change","[data-page-size], [data-section]",function(){var e=$("[data-page-size]").val(),t=$("[data-url]").attr("data-url"),a=$("[data-section]").val(),n=replaceUrlParam(t,"PageSize",e);n=replaceUrlParam(n,"Section",a),$.ajax({url:n,type:"get"}).done(function(e){$("#pageContent").html(e)})}),$("#pageContent").on("click","[data-pagination-number]",function(e){e.preventDefault();var t=$("[data-page-size]").val(),a=$("[data-url]").attr("data-url"),n=$(this).attr("data-pagination-number"),r=$("[data-section]").val(),o=replaceUrlParam(a,"PageSize",t);o=replaceUrlParam(o,"Section",r),o=replaceUrlParam(o,"PageNum",n),console.log(o),$.ajax({url:o,type:"get"}).done(function(e){$("#pageContent").html(e)})}),$("#pageContent").on("click","[data-select-downloadable] a",function(e){e.preventDefault();var t=$(this).attr("data-option-value"),a=$(this).attr("data-option-name"),n=$(this).attr("href");$(this).parents(".btn-group").find("[data-selected-value]").attr("data-selected-value",t),$(this).parents(".btn-group").find("[data-selected-name]").html(a),$(this).parents(".btn-group").find("[data-selected-link]").attr("data-selected-link",n)}),$("[data-tooltip]").tooltip(),$("#pageContent").on("click","[data-favorite]",function(e){e.preventDefault();var t=$(this).attr("data-favorite");"true"==t?removeFromFavorites($(this)):addToFavorites($(this))}),$("#pageContent").on("change","[compatible-list-option]",function(){var e=$("[compatible-productId]").attr("compatible-productId"),t="/Default.aspx?ID=132&productId="+e,a="";$("[compatible-list-option]").each(function(){var e=$(this).attr("name"),t=$(this).val();a+="&"+e+"="+t}),t+=a,$.ajax({url:t,type:"GET",dataType:"html"}).done(function(e){$("#compatibleList").html(e)}),console.log(t)}),$("#pageContent").on("click",".product-list-link",function(e){e.preventDefault();var t=encodeURIComponent($(this).attr("data-group-id")),a=$(this).attr("href"),n="/Default.aspx?ID=126&groupId="+t+"&productId="+a;$.ajax({url:n,type:"get"}).done(function(e){$("#pageContent").html(e),h.getCompatibleList()})})}},Navigation=React.createClass({displayName:"Navigation",getInitialState:function(){return{data:[],selected:""}},componentWillMount:function(){var e=this,t="/Files/WebServices/Navigation.ashx?catalog="+e.props.source;e.serverRequest=$.getJSON(t,function(t){var a=t[0].Nodes;e.setState({data:a})}.bind(this)),e.setState({selected:e.props.bookmark})},componentDidMount:function(){var e=this;console.log("mounted"),setTimeout(function(){console.log("entermarkbookmark"),$.each(e.state.data,function(t,a){var n=markSelected(a,e.state.selected);n&&(n.Expanded=!0)}),e.setState({data:e.state.data})},500)},componentWillUnmount:function(){var e=this;e.serverRequest.abort()},openChild:function(e){e.preventDefault();var t=e.target;"true"==$(t).parent().attr("data-expanded")?($(t).parent().attr("data-expanded","false"),$(t).parent().children(".hasChildren").hide(),$(t).removeClass("opened")):($(t).parent().attr("data-expanded","true"),$(t).parent().children(".hasChildren").show(),$(t).addClass("opened"))},eachItem:function(e,t){if(0!=e.Nodes.length){return React.createElement("li",{key:t,index:t,"data-expanded":e.Expanded},React.createElement("a",{href:e.Id,className:e.Selected,onClick:this.openChild},e.Name),React.createElement("ul",{className:"hasChildren","data-expanded":e.Expanded},React.createElement(NavigationTree,{data:e.Nodes})))}return React.createElement("li",{key:t,index:t,"data-expanded":e.Expanded},React.createElement("a",{href:e.Id,className:e.Selected},e.Name),React.createElement("a",{href:"","data-bookmark":e.Bookmarked,onClick:this.registerBookmark},React.createElement("i",{className:"fa fa-bookmark-o"})))},render:function(){return console.log(this.state.data),React.createElement("ul",{className:"componentWrapper"},this.state.data.map(this.eachItem))}}),NavigationTree=React.createClass({displayName:"NavigationTree",getInitialState:function(){return{data:[],bookmark:"",updated:!1}},componentDidMount:function(){this.setState({data:this.props.data})},openChild:function(e){e.preventDefault();var t=e.target;console.log(this.refs.target),"true"==$(t).parent().attr("data-expanded")?($(t).parents(".hasChildren").eq(0).find(".hasChildren").hide(),$(t).parents(".hasChildren").eq(0).find("li").attr("data-expanded","false"),$(t).parent().find("li").attr("data-expanded","false"),$(t).parent().attr("data-expanded","false"),$(t).parent().children(".hasChildren").hide(),$(t).removeClass("opened")):($(".componentWrapper").find(".opened").removeClass("opened"),$(t).parents(".hasChildren").eq(0).find(".hasChildren").hide(),$(t).parents(".hasChildren").eq(0).find("li").attr("data-expanded","false"),$(t).parent().find("li").attr("data-expanded","false"),console.log($(t).parents(".hasChildren")[0]),$(t).addClass("opened"),$(t).parent().attr("data-expanded","true"),$(t).parent().children(".hasChildren").show())},update:function(e){e.preventDefault();var t=$(e.currentTarget)[0].attributes.href.value,a=encodeURIComponent(t),n="/Default.aspx?ID=126&groupId="+a;$(".navigation").find("a").removeClass("selected"),$(".navigation").find("li").removeAttr("data-expanded"),$(e.currentTarget).parents("li").attr("data-expanded","true"),$(e.currentTarget).addClass("selected"),$.ajax({url:n,type:"GET",dataType:"html"}).done(function(e){console.log("loading"),$("#pageContent").html(e),h.registerPageEvents()})},registerBookmark:function(e){e.preventDefault();var t=$(e.currentTarget),a=t.attr("data-bookmark"),n=t.attr("data-group"),r=t.attr("href"),o=(t.attr("data-index"),this);if("true"==a){var i="/Files/WebServices/Bookmarks.ashx?action=delete&group="+encodeURIComponent(r);$.ajax({method:"GET",url:i,contentType:"application/json",cache:!1}).done(function(e){for(var t=0;t<o.state.data.length;t++){var a=o.state.data[t],n=a.Id;if(r==n){a.Bookmarked=!1;break}}o.setState(o.state)})}else $.ajax({method:"POST",url:"/Files/WebServices/Bookmarks.ashx",data:JSON.stringify({Group:r,Name:n}),contentType:"application/json"}).done(function(e){for(var t=0;t<o.state.data.length;t++){var a=o.state.data[t],n=a.Id;if(r==n){a.Bookmarked=!0;break}}o.setState(o.state)}).fail(function(e){})},eachItem:function(e,t){if(0!=e.Nodes.length){e.Nodes;return React.createElement("li",{key:t,index:t,className:t===this.props.active-1?"dropdown active":"dropdown","data-expanded":e.Expanded},React.createElement("a",{href:e.Id,className:e.Selected,ref:"target",onClick:this.openChild},e.Name),React.createElement("ul",{className:"hasChildren","data-expanded":e.Expanded},React.createElement(NavigationTree,{key:t,data:e.Nodes})))}return React.createElement("li",{key:t,index:t,className:"noIcon","data-expanded":e.Expanded},React.createElement("a",{href:e.Id,onClick:this.update,index:t,"data-overflow":!0,className:e.Selected,"data-toggle":"tooltip","data-placement":"right",title:e.Name},e.Name),React.createElement("a",{href:e.Id,"data-index":t,"data-group":e.Name,"data-bookmark":e.Bookmarked,onClick:this.registerBookmark,ref:"link"},React.createElement("i",{className:"fa fa-bookmark-o"})))},render:function(){return React.createElement("div",null,this.state.data.map(this.eachItem))}}),MainContent=React.createClass({displayName:"MainContent",getInitialState:function(){return{data:"",url:""}},componentWillMount:function(){var e=this,t=this.props.source;e.setState({url:t}),$.ajax({url:t,type:"GET",dataType:"html"}).done(function(t){var a=t;e.setState({data:a}),h.registerPageEvents()})},componentDidMount:function(){},componentDidUpdate:function(){h.getCompatibleList()},renderLoadedContent:function(){return React.createElement("div",{id:"pageContent",dangerouslySetInnerHTML:{__html:this.state.data}})},renderEmptyContent:function(){return React.createElement("div",{id:"pageContent"},React.createElement("div",{className:"loading-image"}))},render:function(){return""==this.props.source?this.renderEmptyContent():this.renderLoadedContent()}}),RenderPage=React.createClass({displayName:"RenderPage",getInitialState:function(){return{catalog:"",groupId:"",productId:"",contentSource:""}},componentWillMount:function(){var e=getQueryVariable("catalog"),t=getQueryVariable("bookmark"),a=getQueryVariable("favorite");contentSource="",a?contentSource="/Default.aspx?ID=126&groupid="+t+"&productId="+a:t&&(contentSource="/Default.aspx?ID=126&groupid="+t),this.setState({catalog:e,groupId:t,productId:a,contentSource:contentSource})},componentDidMount:function(){},onUpdate:function(e){var t=e;this.setState({contentSource:t})},render:function(){return React.createElement("div",{className:"wrapper"},React.createElement("div",{className:"col-sm-3"},React.createElement("div",{id:"catalogNavContainer"},React.createElement("section",{className:"catalogNavSection topSection"},React.createElement("h1",null,this.state.catalog)),React.createElement("section",{className:"catalogNavSection searchSection"},React.createElement("form",{action:"/Default.aspx",id:"searchForm"},React.createElement("input",{type:"hidden",name:"ID",value:"127"}),React.createElement("input",{placeholder:"Search",id:"searchSubmit","data-error":"Search for something",type:"text",name:"q",value:this.props.children}),React.createElement("button",{className:"btn btn-sm btn-warning",type:"submit"},React.createElement("i",{className:"fa fa-search"})))),React.createElement("section",{className:"catalogNavSection navSection navigation"},React.createElement(Navigation,{source:this.state.catalog,onUpdate:this.onUpdate,bookmark:this.state.groupId})))),React.createElement("div",{className:"col-sm-9"},React.createElement("div",{classname:"col-sm-12"},React.createElement("div",{className:"heading-page-wrapper modifier"},React.createElement("h1",{className:"heading-page"},"Catalog"))),React.createElement(MainContent,{source:this.state.contentSource})))}});null!==document.getElementById("react-renderPage")&&ReactDOM.render(React.createElement(RenderPage,null),document.getElementById("react-renderPage"));