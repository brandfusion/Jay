$(document).ready(function(){$("[data-accordeon]").on("click",function(e){e.preventDefault(),$(this).parent(".dropdown").closest(".hasChildren").slideToggle(slow),console.log("click")})}),$(function(){window.downloadPdf=function(){$(".download-pdf").on("click",function(e){e.preventDefault();var t=$(this).parents(".form-group").find("[data-selected-value]").attr("data-selected-value");$(this).parents(".form-group").find("a").each(function(){var e=$(this).attr("data-option-value");e==t&&$("#pdfDownloadFrame").attr("src",t)})})},window.addToFavorites=function(e){var t=e.attr("data-add-favorites");$.ajax({url:t,type:"POST"}).done(function(t){alert("sent"),e.find(".fa-heart").removeClass("fa-heart-o"),e.attr("data-favorite","true")}).fail(function(e){}).always(function(e){})},window.removeFromFavorites=function(e){var t=e.attr("data-remove-favorites");$.ajax({url:t,type:"POST"}).done(function(t){alert("sent"),e.find(".fa-heart").addClass("fa-heart-o"),e.attr("data-favorite","false")}).fail(function(e){}).always(function(e){})},window.getQueryVariable=function(e){for(var t=window.location.search.substring(1),a=t.split("&"),n=0;n<a.length;n++){var o=a[n].split("=");if(o[0]==e)return o[1]}return!1};var e=React.createClass({displayName:"Navigation",getInitialState:function(){return{data:[],selected:""}},componentDidMount:function(){function e(t,a){if(!t)return null;if(t.Selected=t.Id==a,t.Selected)return t.Selected=!0,t;if(!t.Nodes||!t.Nodes.length)return null;for(var n=0;n<t.Nodes.length;n++){var o=t.Nodes[n],r=e(o,a);if(r)return t.Expanded=!0,r}return null}$.getJSON(this.props.source,function(t){if(this.isMounted()){this.setState({data:t});var a=getQueryVariable("bookmark");a=decodeURIComponent(a);var n=this;this.setState({selected:a}),$.each(this.state.data,function(t,a){var o=e(a,n.state.selected);o&&(o.Expanded=!0)}),this.setState({data:this.state.data})}}.bind(this))},openChild:function(e){e.preventDefault();var t=e.target;"true"==$(t).attr("data-expanded")?($(t).attr("data-expanded","false"),$(t).children(".hasChildren").hide()):($(t).attr("data-expanded","true"),$(t).children(".hasChildren").show())},eachItem:function(e,a){return 0!=e.Nodes.length?React.createElement("li",{key:a,index:a,className:a===this.props.active-1?"dropdown active":"dropdown",onClick:this.openChild,"data-expanded":e.Expanded},React.createElement("a",{href:e.Id,className:e.Selected},e.Name),React.createElement("ul",{className:"hasChildren","data-expanded":e.Expanded},React.createElement(t,{data:e.Nodes}))):React.createElement("li",{key:a,index:a,className:a===this.props.active-1?"dropdown active":"dropdown",onClick:this.openChild,"data-expanded":e.Expanded},React.createElement("a",{href:e.Id,className:e.Selected},e.Name),React.createElement("a",{href:"","data-bookmark":e.Bookmarked,onClick:this.registerBookmark},React.createElement("i",{className:"fa fa-bookmark-o"})))},render:function(){return React.createElement("ul",{className:"componentWrapper"},this.state.data.map(this.eachItem))}}),t=React.createClass({displayName:"NavigationTree",getInitialState:function(){return{data:[],bookmark:""}},update:function(e){var t=$(e.target),a=t.attr("href"),n=encodeURIComponent(a),o="/Default.aspx?ID=126&groupId="+n;$(".navigation").find("a").removeClass("true"),$(".navigation").find("li").removeAttr("data-expanded"),$(this).parents("li").attr("data-expanded","true"),$(this).addClass("true"),$.ajax({url:o,type:"get"}).done(function(e){$("#pageContent").html(e),$("[data-select-downloadable] a").on("click",function(e){e.preventDefault();var t=$(this).attr("data-option-value"),a=$(this).attr("data-option-name");$(this).parents(".btn-group").find("[data-selected-value]").attr("data-selected-value",t),$(this).parents(".btn-group").find("[data-selected-name]").html(a)}),$("[data-tooltip]").tooltip(),$("[data-favorite]").on("click",function(e){e.preventDefault();var t=$(this).attr("data-favorite");"true"==t?removeFromFavorites($(this)):addToFavorites($(this))}),downloadPdf(),$(".product-list-link").on("click",function(e){e.preventDefault();var t=encodeURIComponent($(this).attr("data-group-id")),a=$(this).attr("href"),n="/Default.aspx?ID=126&groupId="+t+"&productId="+a;noty({text:"Loading content...",layout:"center",theme:"relax",animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},type:"information",timeout:!1});$.ajax({url:n,type:"get"}).done(function(e){$("#pageContent").html(e),$.noty.closeAll(),$("[data-select-downloadable] a").on("click",function(e){e.preventDefault();var t=$(this).attr("data-option-value"),a=$(this).attr("data-option-name");$(this).parents(".btn-group").find("[data-selected-value]").attr("data-selected-value",t),$(this).parents(".btn-group").find("[data-selected-name]").html(a)}),$("[data-tooltip]").tooltip(),$("[data-favorite]").on("click",function(e){e.preventDefault();var t=$(this).attr("data-favorite");"true"==t?removeFromFavorites($(this)):addToFavorites($(this))}),downloadPdf(),$(".product-list-link").on("click",function(e){e.preventDefault();var t=encodeURIComponent($(this).attr("data-group-id")),a=$(this).attr("href"),n="/Default.aspx?ID=126&groupId="+t+"&productId="+a;noty({text:"Loading content...",layout:"center",theme:"relax",animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},type:"information",timeout:!1});$.ajax({url:n,type:"get"}).done(function(e){$("#pageContent").html(e),$.noty.closeAll()}).fail(function(){}).always(function(){})}),console.log("downloadenter"),downloadPdf()}).fail(function(){}).always(function(){})})}).fail(function(){}).always(function(){})},registerBookmark:function(e){var t=$(e.target).parent("a"),a=t[0].attributes["data-bookmark"].value,n=t[0].attributes["data-group"].value,o=t[0].attributes.href.value,r=(t[0].attributes["data-index"].value,this);if("true"==a){var i="/Files/WebServices/Bookmarks.ashx?action=delete&group="+encodeURIComponent(o);$.ajax({method:"GET",url:i,contentType:"application/json",cache:!1}).done(function(e){for(var t=0;t<r.state.data.length;t++){var a=r.state.data[t],n=a.Id;if(o==n){a.Bookmarked=!1;break}}r.setState(r.state)}).fail(function(e){})}else $.ajax({method:"POST",url:"/Files/WebServices/Bookmarks.ashx",data:JSON.stringify({Group:o,Name:n}),contentType:"application/json"}).done(function(e){for(var t=0;t<r.state.data.length;t++){var a=r.state.data[t],n=a.Id;if(o==n){a.Bookmarked=!0;break}}r.setState(r.state)}).fail(function(e){})},componentDidMount:function(){this.setState({data:this.props.data})},eachItem:function(e,a){if(0!=e.Nodes.length){e.Nodes;return React.createElement("li",{key:a,index:a,className:a===this.props.active-1?"dropdown active":"dropdown",onClick:this.openChild,"data-expanded":e.Expanded},React.createElement("a",{href:e.Id,className:e.Selected},e.Name),React.createElement("ul",{className:"hasChildren","data-expanded":e.Expanded},React.createElement(t,{key:a,data:e.Nodes})))}return React.createElement("li",{key:a,index:a,className:"noIcon",onClick:this.openChild,"data-expanded":e.Expanded},React.createElement("a",{href:e.Id,onClick:this.update,index:a,"data-overflow":!0,className:e.Selected,"data-toggle":"tooltip","data-placement":"right",title:e.Name},e.Name),React.createElement("a",{href:e.Id,"data-index":a,"data-group":e.Name,"data-bookmark":e.Bookmarked,onClick:this.registerBookmark,ref:"link"},React.createElement("i",{className:"fa fa-bookmark-o"})))},render:function(){return React.createElement("div",null,this.state.data.map(this.eachItem))}}),a=(React.createClass({displayName:"NavigationLink",render:function(){return React.createElement("li",{className:"noIcon","data-expanded":this.props.expanded},React.createElement("a",{href:this.props.href,"data-overflow":!0,className:this.props.className,"data-toggle":"tooltip","data-placement":"right",title:this.props.title},this.props.title),React.createElement("a",{href:item.Id,"data-index":i,"data-group":item.Name,"data-bookmark":item.Bookmarked,onClick:this.registerBookmark,ref:"link"},React.createElement("i",{className:"fa fa-bookmark-o"})))}}),React.createClass({displayName:"MainContent",getInitialState:function(){return{data:""}},componentDidMount:function(){var e=this;e.props.source;e.setState({data:"data"})},renderLoadedContent:function(){return React.createElement("div",{id:"pageContent",dangerouslySetInnerHTML:{__html:this.state.data}})},renderEmptyContent:function(){return React.createElement("div",{id:"pageContent"},React.createElement("div",{className:"loading-image"}))},render:function(){return console.log(this.props.source),""==this.state.data?this.renderEmptyContent():this.renderLoadedContent()}})),n=React.createClass({displayName:"RenderPage",getInitialState:function(){return{catalog:"",catgalogName:"",groupId:"",productId:"",contentSource:""}},componentDidMount:function(){var e=getQueryVariable("catalog"),t=getQueryVariable("catalog").toLowerCase(),a="/Files/WebServices/Navigation.ashx?catalog="+t,n=getQueryVariable("bookmark"),o=getQueryVariable("favorite");contentSource="",o?contentSource="/Default.aspx?ID=126&groupid="+n+"&productId="+o:n&&(contentSource="/Default.aspx?ID=126&groupid="+n),this.setState({catalogName:e,catalog:a,groupID:n,productId:o,contentSource:contentSource})},render:function(){return React.createElement("div",{className:"wrapper"},React.createElement("div",{className:"col-sm-3"},React.createElement("div",{id:"catalogNavContainer"},React.createElement("section",{className:"catalogNavSection topSection"},React.createElement("h1",null,this.state.catalogName),React.createElement("a",{href:"/Default.aspx?ID=1",className:"btn btn-sm btn-warning pull-right"},"Select Catalog")),React.createElement("section",{className:"catalogNavSection searchSection"},React.createElement("form",{action:"/Default.aspx",id:"searchForm"},React.createElement("input",{type:"hidden",name:"ID",value:"127"}),React.createElement("input",{placeholder:"Serial #",id:"searchSubmit","data-error":"Search for something",type:"text",name:"q",value:this.props.children}),React.createElement("button",{className:"btn btn-sm btn-warning",type:"submit"},React.createElement("i",{className:"fa fa-search"})))),React.createElement("section",{className:"catalogNavSection navSection navigation"},React.createElement(e,{"test-source":this.state.catalog,source:"/Files/WebServices/Navigation.ashx?catalog=jayco",onChange:this.update})))),React.createElement("div",{className:"col-sm-9"},React.createElement(a,{source:this.state.contentSource})))}});ReactDOM.render(React.createElement(n,null),document.getElementById("react-renderPage"))});